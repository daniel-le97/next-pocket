(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[997],{97417:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/DirectMessages/[id]",function(){return r(19344)}])},77555:function(e,s,r){"use strict";r.d(s,{Z:function(){return x}});var i=r(85893),a=r(67294),t=r(50828),n=r(11163),c=r(19782),l=r(58444),d=r(31089),o=r(89583);function UserStatus(e){let{status:s}=e;return(0,i.jsx)("div",{className:"absolute right-0 bottom-0 rounded-full border-[3px] border-zinc-800 shadow-md ",children:"online"===s?(0,i.jsx)(o.gbA,{color:"#22c55e",size:10}):"away"===s?(0,i.jsx)(o.gbA,{color:"#f0b232",size:10}):(0,i.jsx)(o.gbA,{color:"#ef4444",size:10})})}var u=r(4445);let UserCard=e=>{var s,r;let{friendShip:a}=e,t=(0,n.useRouter)();return a?(0,i.jsxs)("div",{onClick:()=>{t.push("/DirectMessages/".concat(a.id))},className:"friendShip-container my-3 flex cursor-pointer gap-x-2 rounded-md p-2 transition-all duration-150 ease-in hover:bg-zinc-500 hover:bg-opacity-25  ",children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("img",{src:null===(s=a.friend)||void 0===s?void 0:s.avatarUrl,alt:"userIcon",width:40,className:"rounded-full shadow-md shadow-zinc-900"}),(0,i.jsx)("div",{className:"absolute left-11 top-10",children:a.activityStatus&&(0,i.jsx)(UserStatus,{status:a.activityStatus})})]}),(0,i.jsx)("small",{className:" font-bold text-rose-600",children:null===(r=a.friend)||void 0===r?void 0:r.username})]}):(0,i.jsx)("div",{children:"NO USER"})};var x=(0,t.Pi)(()=>{var e;let s=null===(e=l.a.friends)||void 0===e?void 0:e.filter(e=>"accepted"===e.status),r=l.a.user,t=(0,n.useRouter)(),goToFriends=()=>{t.push("/DirectMessages")};return(0,a.useEffect)(()=>{let e,s;return(async()=>{try{if(!r)return;await d._Q.getUserFriendsList(),e=await d._Q.subscribe(),s=await d._A.subscribeDM()}catch(e){c.Z.error(e)}})(),()=>{null==e||e(),null==s||s()}},[]),(0,i.jsxs)("div",{className:"friends-bar",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h5",{className:"channel-block-text",onClick:()=>goToFriends(),children:(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)(o.PZ_,{className:"inline-block mr-2"}),"Friends"]})}),(0,i.jsx)("div",{className:"channel-block",children:(0,i.jsx)("h5",{className:"channel-block-text",children:"Direct Messages"})}),(0,i.jsx)("div",{className:"px-3 ",children:s&&(null==s?void 0:s.map((e,s)=>(0,i.jsx)(UserCard,{friendShip:e},s)))})]}),(0,i.jsx)(u.Z,{user:r})]})})},19344:function(e,s,r){"use strict";r.r(s);var i=r(85893),a=r(9008),t=r.n(a),n=r(67294),c=r(11163),l=r(58444),d=r(50828),o=r(19782),u=r(77555),x=r(15093),h=r(31089),f=r(87313),m=r(27564);s.default=(0,d.Pi)((0,x.Q)(()=>{let e=(0,c.useRouter)(),s=e.query.id;return(0,n.useEffect)(()=>{let r;return s&&(async()=>{try{if(l.a.page=1,l.a.dmRouterQuery=e.query.id,!0==l.a.dmTracker[s])return;l.a.directMessages=l.a.directMessages.filter(e=>e.id!=s),l.a.dmTracker[s]=!0,await h.bK.getDirectMessages(s),await h._Q.getUserFriendsList(),r=await h.bK.subscribeToDM(s)}catch(e){o.Z.error(e)}})(),()=>{l.a.dmTracker[s]=!1,r&&r()}},[e.query.id]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t(),{children:[(0,i.jsx)("title",{children:"next-pocket"}),(0,i.jsx)("meta",{name:"description",content:"Generated by create-t3-app"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center ",children:(0,i.jsxs)("div",{className:"flex  h-screen   w-full ",children:[(0,i.jsx)(u.Z,{}),(0,i.jsxs)("div",{className:"message-container",children:[e.query.id&&(0,i.jsx)(f.Z,{}),(0,i.jsx)(m.Z,{})]})]})})]})}))},72770:function(e){"use strict";e.exports=next}},function(e){e.O(0,[258,310,774,888,179],function(){return e(e.s=97417)}),_N_E=e.O()}]);