(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{62705:function(e,t,r){var n=r(55639).Symbol;e.exports=n},44239:function(e,t,r){var n=r(62705),i=r(89607),a=r(2333),s=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):a(e)}},27561:function(e,t,r){var n=r(67990),i=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(i,""):e}},31957:function(e,t,r){var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},89607:function(e,t,r){var n=r(62705),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,o=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,o),r=e[o];try{e[o]=void 0;var n=!0}catch(e){}var i=s.call(e);return n&&(t?e[o]=r:delete e[o]),i}},2333:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},55639:function(e,t,r){var n=r(31957),i="object"==typeof self&&self&&self.Object===Object&&self,a=n||i||Function("return this")();e.exports=a},67990:function(e){var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},23279:function(e,t,r){var n=r(13218),i=r(7771),a=r(14841),s=Math.max,o=Math.min;e.exports=function(e,t,r){var c,l,u,d,f,v,m=0,p=!1,x=!1,g=!0;if("function"!=typeof e)throw TypeError("Expected a function");function invokeFunc(t){var r=c,n=l;return c=l=void 0,m=t,d=e.apply(n,r)}function shouldInvoke(e){var r=e-v,n=e-m;return void 0===v||r>=t||r<0||x&&n>=u}function timerExpired(){var e,r,n,a=i();if(shouldInvoke(a))return trailingEdge(a);f=setTimeout(timerExpired,(e=a-v,r=a-m,n=t-e,x?o(n,u-r):n))}function trailingEdge(e){return(f=void 0,g&&c)?invokeFunc(e):(c=l=void 0,d)}function debounced(){var e,r=i(),n=shouldInvoke(r);if(c=arguments,l=this,v=r,n){if(void 0===f)return m=e=v,f=setTimeout(timerExpired,t),p?invokeFunc(e):d;if(x)return clearTimeout(f),f=setTimeout(timerExpired,t),invokeFunc(v)}return void 0===f&&(f=setTimeout(timerExpired,t)),d}return t=a(t)||0,n(r)&&(p=!!r.leading,u=(x="maxWait"in r)?s(a(r.maxWait)||0,t):u,g="trailing"in r?!!r.trailing:g),debounced.cancel=function(){void 0!==f&&clearTimeout(f),m=0,c=v=l=f=void 0},debounced.flush=function(){return void 0===f?d:trailingEdge(i())},debounced}},13218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},33448:function(e,t,r){var n=r(44239),i=r(37005);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==n(e)}},7771:function(e,t,r){var n=r(55639);e.exports=function(){return n.Date.now()}},14841:function(e,t,r){var n=r(27561),i=r(13218),a=r(33448),s=0/0,o=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return s;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=c.test(e);return r||l.test(e)?u(e.slice(2),r?2:8):o.test(e)?s:+e}},48312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(86406)}])},86406:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(85893),i=r(50828),a=r(9008),s=r.n(a),o=r(11163),c=r(67294),l=r(58444),u=r(85095),d=r(89583),f=r(19782),v=r(93737),m=r(63750),p=r(44080),x=r(31089),g=(0,i.Pi)(e=>{var t;let{server:r}=e,[i,a]=(0,c.useState)([]),s=u.pb.authStore.model,g=(0,o.useRouter)(),[h,j]=(0,c.useState)(!1);async function joinServer(){try{var e;if(!s)return;let t={server:r.id,user:s.id},n=await f.Z.confirm("Join ".concat(r.name,"?"),"you will be directed to the server page","Join","question");if(!n)return;await v.C.joinServer(t),g.push("/server/".concat(r.id,"/channel/").concat(null===(e=l.a.activeChannel)||void 0===e?void 0:e.id)),await x.uy.getServersList(l.a.page)}catch(e){f.Z.error(e,"Join Server")}}let checkIfMember=()=>{var e;(null===(e=r.members)||void 0===e?void 0:e.find(e=>e.user===(null==s?void 0:s.id)))&&j(!0)};return(0,c.useEffect)(()=>{checkIfMember()},[l.a.userServers]),(0,n.jsx)(p.u,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,n.jsxs)("div",{className:"server-card group  ".concat(h?"bg-gray-300 from-zinc-900 to-green-400 hover:from-zinc-900 hover:to-emerald-500":"bg-gray-300 from-zinc-900 to-gray-600"),children:[(0,n.jsx)("img",{src:r.image.url,alt:"",className:"server-image"}),(0,n.jsxs)("div",{className:"mt-2 p-3",children:[(0,n.jsxs)("div",{className:" flex w-full justify-between ",children:[(0,n.jsx)("div",{className:" server-name ",children:r.name}),h?(0,n.jsx)(d.TZR,{size:20,className:"text-emerald-500"}):(0,n.jsxs)("button",{className:"group/join relative  ",onClick:joinServer,children:[(0,n.jsx)(d.Bj$,{size:20}),(0,n.jsx)("span",{className:" join-button-tooltip",children:"Join"})]})]}),(0,n.jsx)("p",{className:"mt-2 pb-10",children:r.description})]}),(0,n.jsxs)("div",{className:"server-members-count  ",children:[(0,n.jsx)(m.KC7,{size:10,className:"text-gray-300"}),null===(t=r.members)||void 0===t?void 0:t.length,(0,n.jsx)("small",{children:"Members"})]})]})})}),h=r(67838),j=r(13479),b=r(23279),y=r.n(b),N=(0,i.Pi)(()=>{let[e,t]=(0,c.useState)(""),[r,i]=(0,c.useState)(!0),a=y()(async e=>{let t=await u.pb.collection(j.nW.Servers).getList(1,9,{filter:'name ~ "'.concat(e,'"  '),expand:"image,members"});l.a.servers=t.items},1e3);return(0,n.jsx)("div",{className:" container  relative mt-5 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"relative w-full flex justify-center",children:[(0,n.jsx)("input",{className:" w-1/2 transition-all duration-700 dark:text-gray-300 ",type:"text",placeholder:"Search Server By Name",value:e,onChange:e=>{let r=e.target.value;t(r),a(r)}}),(0,n.jsx)(d.U41,{size:32,className:"text-secondary absolute  right-64 top-1.5 z-10 my-auto ml-2 text-gray-500 "})]})})}),S=(0,i.Pi)(e=>{let{onPageChange:t,totalPages:r}=e,i=(0,c.useCallback)(y()(e=>{let r=e?l.a.page+1:l.a.page-1;t(r)},500),[t]);return(0,n.jsxs)("div",{className:"my-3 flex items-center justify-center gap-x-6",children:[(0,n.jsx)("button",{className:"btn-primary disabled:cursor-not-allowed",disabled:1===l.a.page,onClick:()=>i(!1),children:(0,n.jsx)(d.MZt,{size:32})}),(0,n.jsxs)("div",{className:"mx-3 flex gap-x-2",children:[Array.from({length:r>3?3:r},(e,t)=>{let r=l.a.page<=2?t+1:l.a.page-2+t;return r}).map(e=>(0,n.jsx)("div",{className:"cursor-pointer px-2 text-gray-300 transition-all  hover:rounded-full hover:bg-indigo-500 ".concat(e===l.a.page?" rounded-full bg-indigo-500 px-2  ":""),onClick:()=>{t(e)},children:e},e)),r>3&&l.a.page!=r&&(0,n.jsxs)("div",{className:"text-gray-300",children:["...",r]})]}),(0,n.jsx)("button",{className:"btn-primary disabled:cursor-not-allowed",disabled:l.a.page===r,onClick:()=>i(!0),children:(0,n.jsx)(d.Wgy,{size:32})})]})});let ExploreBanner=()=>(0,n.jsx)("div",{className:"explore-banner  ",children:(0,n.jsx)("div",{className:"relative  ",children:(0,n.jsx)("img",{src:"/_next/static/media/banner-image.b3d8f15e.svg",alt:"spaceman",width:400,className:" shadow-zinc-900  "})})});var w=(0,i.Pi)(()=>{let e=(0,o.useRouter)(),[t,r]=(0,c.useState)(l.a.servers);return(0,c.useEffect)(()=>{let t=u.pb.authStore.model;t||e.push("/login")},[e]),(0,c.useEffect)(()=>{let getServers=async()=>{l.a.page=1,await h.u.getServersList(l.a.page)};getServers()},[]),(0,c.useEffect)(()=>{r(l.a.servers)},[l.a.servers]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s(),{children:[(0,n.jsx)("title",{children:"next-pocket"}),(0,n.jsx)("meta",{name:"description",content:"Generated by create-t3-app"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)("main",{className:"  dark flex min-h-screen  w-full flex-col bg-zinc-800 ",children:[(0,n.jsx)(ExploreBanner,{}),(0,n.jsx)(N,{}),(0,n.jsx)(S,{onPageChange:e=>{l.a.page=e,h.u.getServersList(e)},totalPages:l.a.totalPages}),(0,n.jsx)("div",{className:"mb-4  flex  flex-wrap    justify-center ",children:t&&t.map(e=>(0,n.jsx)(g,{server:e},e.id))})]})]})})},9008:function(e,t,r){e.exports=r(79201)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);