(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[992],{49229:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/DirectMessages",function(){return r(9104)}])},77555:function(e,s,r){"use strict";r.d(s,{Z:function(){return x}});var a=r(85893),t=r(67294),l=r(50828),i=r(11163),n=r(19782),c=r(58444),d=r(31089),o=r(89583);function UserStatus(e){let{status:s}=e;return(0,a.jsx)("div",{className:"absolute right-0 bottom-0 rounded-full border-[3px] border-zinc-800 shadow-md ",children:"online"===s?(0,a.jsx)(o.gbA,{color:"#22c55e",size:10}):"away"===s?(0,a.jsx)(o.gbA,{color:"#f0b232",size:10}):(0,a.jsx)(o.gbA,{color:"#ef4444",size:10})})}var u=r(4445);let UserCard=e=>{var s,r;let{friendShip:t}=e,l=(0,i.useRouter)();return t?(0,a.jsxs)("div",{onClick:()=>{l.push("/DirectMessages/".concat(t.id))},className:"friendShip-container my-3 flex cursor-pointer gap-x-2 rounded-md p-2 transition-all duration-150 ease-in hover:bg-zinc-500 hover:bg-opacity-25  ",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:null===(s=t.friend)||void 0===s?void 0:s.avatarUrl,alt:"userIcon",width:40,className:"rounded-full shadow-md shadow-zinc-900"}),(0,a.jsx)("div",{className:"absolute left-11 top-10",children:t.activityStatus&&(0,a.jsx)(UserStatus,{status:t.activityStatus})})]}),(0,a.jsx)("small",{className:" font-bold text-rose-600",children:null===(r=t.friend)||void 0===r?void 0:r.username})]}):(0,a.jsx)("div",{children:"NO USER"})};var x=(0,l.Pi)(()=>{var e;let s=null===(e=c.a.friends)||void 0===e?void 0:e.filter(e=>"accepted"===e.status),r=c.a.user,l=(0,i.useRouter)(),goToFriends=()=>{l.push("/DirectMessages")};return(0,t.useEffect)(()=>{let e,s;return(async()=>{try{if(!r)return;await d._Q.getUserFriendsList(),e=await d._Q.subscribe(),s=await d._A.subscribeDM()}catch(e){n.Z.error(e)}})(),()=>{null==e||e(),null==s||s()}},[]),(0,a.jsxs)("div",{className:"friends-bar",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"channel-block-text",onClick:()=>goToFriends(),children:(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)(o.PZ_,{className:"inline-block mr-2"}),"Friends"]})}),(0,a.jsx)("div",{className:"channel-block",children:(0,a.jsx)("h5",{className:"channel-block-text",children:"Direct Messages"})}),(0,a.jsx)("div",{className:"px-3 ",children:s&&(null==s?void 0:s.map((e,s)=>(0,a.jsx)(UserCard,{friendShip:e},s)))})]}),(0,a.jsx)(u.Z,{user:r})]})})},88669:function(e,s,r){"use strict";var a=r(85893);s.Z=e=>{let{avatarUrl:s,width:r,height:t}=e;return(0,a.jsx)("img",{src:s,alt:"User Avatar",className:"rounded-full ".concat(r," ").concat(t," object-cover shadow-md  ")})}},4445:function(e,s,r){"use strict";var a=r(85893),t=r(61528),l=r(50828),i=r(89583),n=r(58444),c=r(88669),d=r(67294);s.Z=(0,l.Pi)(e=>{var s;let{user:r}=e,[l,o]=(0,d.useState)(!1),[u,x]=(0,d.useState)(!1);return r&&(0,a.jsxs)("div",{className:"group",children:[(0,a.jsx)("button",{onFocus:()=>{o(!l)},className:"user-bar group ",children:(0,a.jsxs)("div",{className:" user-bar-container",children:[(0,a.jsx)(c.Z,{avatarUrl:r.avatarUrl,height:"w-9",width:"h-9"}),(0,a.jsx)("div",{className:" truncate font-semibold  text-white",children:null==r?void 0:r.username})]})}),(0,a.jsxs)("div",{className:"user-modal  ".concat(l?"scale-100":"scale-0"," "),children:[(0,a.jsx)("div",{className:"user-modal-banner"}),(0,a.jsx)("div",{className:"user-modal-user-image",children:(0,a.jsx)(c.Z,{avatarUrl:r.avatarUrl,height:"w-20",width:"h-20"})}),(0,a.jsxs)("div",{className:"mx-2 mt-16  rounded-md p-2 ",style:{backgroundColor:"#111214"},children:[(0,a.jsx)("p",{className:"p-2 text-xl",children:null==r?void 0:r.username}),(0,a.jsx)("hr",{className:"my-2  border-gray-600"}),(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsx)("p",{className:"text-md font-bold ",children:"MEMBER SINCE"}),(0,a.jsx)("p",{className:"  font-mono text-gray-400  ",children:new Date(r.created).toLocaleDateString()})]}),(0,a.jsx)("hr",{className:"my-2  border-gray-600"}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(t.ZP,{trigger:u?"click":"hover",content:u?"Copied!":"Copy to Clipboard",color:u?"success":"invert",visible:u,children:(0,a.jsxs)("div",{className:"  text-md group/item flex w-96 cursor-pointer justify-between rounded  p-2  ",onClick:e=>{var s;x(!0),setTimeout(()=>x(!1),1500),navigator.clipboard.writeText(r.username+"#"+(null===(s=n.a.userStatus)||void 0===s?void 0:s.id))},children:[r.username+"#"+(null===(s=n.a.userStatus)||void 0===s?void 0:s.id),(0,a.jsx)("div",{className:"opacity-0 group-hover/item:opacity-100",children:(0,a.jsx)(i.esY,{size:20,className:u?"text-emerald-500  00":""})})]})})}),(0,a.jsx)("div",{className:"",children:"LogOut"})]})]})]})})},15093:function(e,s,r){"use strict";r.d(s,{Q:function(){return withAuth},k:function(){return withMember}});var a=r(85893),t=r(11163),l=r(67294),i=r(58444);let withAuth=e=>s=>{let r=(0,t.useRouter)(),n=i.a.user,checkAuth=async()=>{if(!n)return i.a.lastPath=r.asPath,r.push("/login")};return(0,l.useEffect)(()=>{checkAuth()},[r]),(0,a.jsx)(e,{...s})};r(72770);var n=r(31089);let withMember=e=>s=>{let r=(0,t.useRouter)(),c=r.query.id||i.a.lastQueryId,d=i.a.user,[o,u]=(0,l.useState)(!1),checkIsMember=async()=>{let e=await n.Cd.getUserMemberRecord({user:null==d?void 0:d.id,server:c});u(!!e)};return((0,l.useEffect)(()=>{c&&checkIsMember()},[c]),!1===o)?(0,a.jsx)("div",{children:"please join the server before trying"}):(0,a.jsx)(e,{...s})}},9104:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return C}});var a=r(85893),t=r(50828),l=r(67294),i=r(9211),n=r(9008),c=r.n(n),d=r(77555),o=r(31089),u=r(58444),x=r(19782),m=r(88669),h=(0,t.Pi)(e=>{let{user:s}=e;return(0,a.jsxs)("div",{className:"user-container flex gap-x-2  items-center ",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.Z,{avatarUrl:s.avatarUrl,width:"w-10",height:"h-10"}),(0,a.jsx)("div",{className:"absolute left-8 top-9"})]}),(0,a.jsx)("small",{className:" font-bold text-rose-600",children:s.username})]})}),v=r(3688),j=(0,t.Pi)(()=>{var e,s;let r=(null===(e=u.a.friends)||void 0===e?void 0:e.filter(e=>{var s,r;return"pending"===e.status&&(null===(s=e.requester)||void 0===s?void 0:s.id)==(null===(r=u.a.user)||void 0===r?void 0:r.id)}))||[],t=(null===(s=u.a.friends)||void 0===s?void 0:s.filter(e=>{var s,r;return"pending"===e.status&&(null===(s=e.requester)||void 0===s?void 0:s.id)!=(null===(r=u.a.user)||void 0===r?void 0:r.id)}))||[];async function handleAccept(e){try{await o._Q.accept(e)}catch(e){x.Z.error(e)}}async function handleDecline(e){try{await o._Q.delete(e)}catch(e){x.Z.error(e)}}return(0,a.jsxs)("div",{className:"rounded-md p-5",children:[(0,a.jsx)("div",{className:"text-lg font-bold dark:text-zinc-200 ",children:"Decline or Accept Friends Requests"}),(0,a.jsxs)("div",{className:"relative flex flex-col py-4 ",children:[(0,a.jsxs)("ul",{className:"mb-5 w-full",children:[(0,a.jsx)("div",{className:"my-2 text-xl font-bold dark:text-white",children:"Received:"}),t.length?t.map(e=>(0,a.jsxs)("li",{className:"flex w-full justify-between gap-x-2 rounded-md bg-zinc-800 p-2 m-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-3 text-xl font-bold dark:text-zinc-300",children:[(0,a.jsx)(h,{user:e.friend}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:["Status: ",e.status]})]}),(0,a.jsx)("div",{className:"flex items-center text-sm dark:text-gray-300",children:(0,a.jsx)(v.Z,{datetime:e.created,locale:"en-US",style:{margin:5}})}),(0,a.jsxs)("div",{className:"flex gap-x-2",children:[(0,a.jsx)("button",{className:"btn-primary",onClick:()=>handleAccept(e.id),children:"Accept"}),(0,a.jsx)("button",{className:"rounded-md bg-purple-500 p-2 font-bold dark:text-zinc-300 hover:bg-opacity-80",onClick:()=>handleDecline(e.id),children:"Decline"})]})]},e.id)):(0,a.jsx)("div",{className:"text-xl font-bold dark:text-zinc-200",children:"No Friend Requests received"})]}),(0,a.jsxs)("ul",{className:"w-full",children:[(0,a.jsx)("div",{className:"my-2 text-xl font-bold dark:text-white",children:"Sent:"}),r.length?r.map(e=>(0,a.jsxs)("li",{className:"flex w-full justify-between gap-x-2 rounded-md bg-zinc-800 p-2 m-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-3 text-xl font-bold dark:text-zinc-300",children:[(0,a.jsx)(h,{user:e.friend}),(0,a.jsxs)("div",{className:"text-sm",children:["Status: ",e.status]})]}),(0,a.jsx)("div",{className:"flex items-center text-sm text-gray-300",children:(0,a.jsx)(v.Z,{datetime:e.created,locale:"en-US",style:{margin:5}})}),(0,a.jsx)("div",{className:"flex gap-x-2",children:(0,a.jsx)("button",{className:"rounded-md bg-purple-500 p-2 font-bold dark:text-zinc-300 hover:bg-opacity-80",onClick:()=>handleDecline(e.id),children:"Cancel"})})]},e.id)):(0,a.jsx)("div",{className:"text-xl font-bold dark:text-zinc-200",children:"No Friend Requests sent"})]})]})]})}),f=r(87536),N=r(23279),p=r.n(N),b=r(11312),g=r(61528),y=r(89583),w=r(41664),k=r.n(w),S=(0,t.Pi)(()=>{let[e,s]=(0,l.useState)(!1),[r,t]=(0,l.useState)(!1),[i,n]=(0,l.useState)(""),{register:c,handleSubmit:d,setValue:u,reset:m}=(0,f.cI)({defaultValues:{receiver:"",receiverData:""}}),handleChange=async e=>{let s=e.currentTarget.value;await h(s)},onSubmit=async r=>{try{if(e){let e=await o._Q.create(r.receiver);e&&(m(),s(!1),n(""),x.Z.success("Sent Friend Request!"))}}catch(e){x.Z.error(e)}},h=(0,l.useCallback)(p()(async e=>{try{t(!0);let r=await o.Xv.checkIfUserCanAddFriend(e);if(r.error)return handleInvalidInput(r.error);u("receiver",r.userId),s(!0),t(!1)}catch(e){x.Z.error(e)}},1e3),[]),handleInvalidInput=e=>{console.warn(e),n(e),t(!1),s(!1)};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"rounded-md  p-5",children:[(0,a.jsx)("div",{className:" text-lg font-bold dark:text-zinc-200",children:"Add Friend"}),(0,a.jsxs)("div",{className:" dark:text-zinc-400",children:["You can add a friend with their username and friendId. It's cAsE sEnSiTiVe",(0,a.jsx)("br",{}),"beepo#7pav16sqx77dapf"]}),(0,a.jsxs)("div",{className:"relative flex flex-col py-4",children:[(0,a.jsx)(g.ZP,{placement:"bottom",color:"invert",content:(0,a.jsx)("strong",{children:" Example: TungusTheFungus#d1xf11e03i3mio2"}),children:(0,a.jsx)(y.MXt,{size:25,className:"dark:text-gray-300"})}),(0,a.jsxs)("form",{onSubmit:d(onSubmit),className:"relative flex w-full  py-4",children:[(0,a.jsx)("input",{type:"text",...c("receiverData",{required:!0}),className:"add-friend-input ".concat(e?"border-emerald-500":""),placeholder:"Enter a Username#FriendId ",onChange:e=>handleChange(e)}),(0,a.jsx)("button",{className:"".concat(e?"send-friend-request-button ":"send-friend-request-button-disabled"),disabled:!e,type:"submit",children:"Send Friend Request"})]}),(0,a.jsx)("div",{className:" z-30",children:(0,a.jsx)(b.Z,{show:r})}),""!==i&&(0,a.jsx)("div",{className:"text-red-400",children:i}),e&&(0,a.jsxs)("div",{className:"  flex items-center gap-x-2  p-2",children:[(0,a.jsx)("div",{className:"text-emerald-500",children:"✓"}),(0,a.jsx)("div",{className:"text-emerald-500",children:"Valid"})]})]}),(0,a.jsx)("hr",{className:"border-gray-500"}),(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("div",{className:"my-3 text-lg font-bold dark:text-gray-200",children:"MAKE FRIENDS BY JOINING SERVERS AND CONNECTING"}),(0,a.jsx)(k(),{href:"/",children:(0,a.jsxs)("div",{className:"flex w-1/2  items-center justify-between rounded border border-gray-500 bg-zinc-800/40 py-2 px-4 hover:bg-zinc-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-2 dark:text-gray-300",children:[(0,a.jsx)("div",{className:"rounded-lg bg-gray-800 p-2",children:(0,a.jsx)(y.Phk,{size:30})}),"Explore Public Servers"]}),(0,a.jsx)(y.Dli,{size:30,className:"text-gray-300"})]})})]})]})})}),z=r(15093);function classNames(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return s.filter(Boolean).join(" ")}var C=(0,t.Pi)((0,z.Q)(function(){let[e]=(0,l.useState)(["Requests","AddFriend"]),[s,r]=(0,l.useState)("Requests");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c(),{children:[(0,a.jsx)("title",{children:"next-pocket"}),(0,a.jsx)("meta",{name:"description",content:"Generated by create-t3-app"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center ",children:(0,a.jsxs)("div",{className:"flex  h-screen  w-full ",children:[(0,a.jsx)(d.Z,{}),(0,a.jsx)("div",{className:" relative h-full flex-1 items-stretch    overflow-hidden bg-gray-300   dark:bg-zinc-700  ",children:(0,a.jsx)("div",{className:"",children:(0,a.jsx)("div",{className:"px-2  sm:px-0",children:(0,a.jsxs)(i.O.Group,{children:[(0,a.jsx)(i.O.List,{className:"flex space-x-1  ",children:e.map(e=>(0,a.jsx)(i.O,{className:e=>{let{selected:s}=e;return classNames(s?"active-tab-list":"tab-list")},onClick:()=>r(e),children:e},e))}),(0,a.jsxs)(i.O.Panels,{className:"mt-2",children:[(0,a.jsx)(i.O.Panel,{className:classNames("rounded-xl  p-3"," "),children:"Requests"===s&&(0,a.jsx)(j,{})}),(0,a.jsx)(i.O.Panel,{className:classNames(" rounded-xl p-3",""),children:"AddFriend"===s&&(0,a.jsx)(S,{})})]})]})})})})]})})]})}))},72770:function(e){"use strict";e.exports=next}},function(e){e.O(0,[308,774,888,179],function(){return e(e.s=49229)}),_N_E=e.O()}]);