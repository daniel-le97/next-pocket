(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{39321:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/server/[id]/join",function(){return n(1260)}])},1260:function(e,r,n){"use strict";n.r(r);var t=n(85893),i=n(50828),c=n(11163),a=n(67294),u=n(58444),o=n(19782),s=n(93737),l=n(67838);r.default=(0,i.Pi)(()=>{let e=u.a.user,r=(0,c.useRouter)(),n=r.query.id;return(0,a.useEffect)(()=>{if(n){let getServer=async()=>{await l.u.getById(n)};if(!e){u.a.lastPath="server/".concat(r.query.id,"/join"),r.push("/login");return}let createMember=async()=>{try{let c={user:e.id,server:n},a=await s.C.joinServer(c);if(a){var t,i;o.Z.success("Welcome to ".concat(null===(t=u.a.activeServer)||void 0===t?void 0:t.name));let e=null==a?void 0:null===(i=a.channels[0])||void 0===i?void 0:i.id;await r.push("/server/".concat(n,"/channel/").concat(e,"}"))}}catch(e){o.Z.error(e,"server/".concat(n,"/join"))}};getServer(),createMember()}},[r,n]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{children:"loading..."})})})}},function(e){e.O(0,[774,888,179],function(){return e(e.s=39321)}),_N_E=e.O()}]);