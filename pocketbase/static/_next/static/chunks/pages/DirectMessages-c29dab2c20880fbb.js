(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[992],{49229:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/DirectMessages",function(){return t(70424)}])},12997:function(e,s,t){"use strict";var r=t(85893),i=t(67294),l=t(50828),a=t(11163),n=t(79790),c=t(50229),d=t(85699),x=t(19524),o=t(37066),u=t(89583);let m=()=>{var e;let s=null===(e=c.a.friends)||void 0===e?void 0:e.filter(e=>"accepted"===e.status),t=c.a.user,l=(0,a.useRouter)(),o=()=>{l.push("/DirectMessages")};return(0,i.useEffect)(()=>{let e,s;return(async()=>{try{if(!t)return;await d._Q.getUserFriendsList(),e=await d._Q.subscribe(),s=await d._A.subscribeDM()}catch(e){n.Z.error(e)}})(),()=>{let t=null==e?void 0:e(),r=null==s?void 0:s();t&&console.log("unsubbed from friends records"),r&&console.log("unsubbed from dm status")}},[]),(0,r.jsxs)("div",{className:"friends-bar",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"channel-block-text",onClick:()=>o(),children:(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)(u.PZ_,{className:"inline-block mr-2"}),"Friends"]})}),(0,r.jsx)("div",{className:"channel-block",children:(0,r.jsx)("h5",{className:"channel-block-text",children:"Direct Messages"})}),(0,r.jsx)("div",{className:"px-3 ",children:s&&(null==s?void 0:s.map((e,s)=>(0,r.jsx)(h,{friendShip:e},s)))})]}),(0,r.jsx)(x.t,{user:t})]})},h=e=>{var s,t;let{friendShip:l}=e,[n,c]=(0,i.useState)(!1),d=(0,a.useRouter)();if(!l)return(0,r.jsx)("div",{children:"NO USER"});let x=()=>{d.push("/DirectMessages/".concat(l.id))};return(0,r.jsxs)("div",{onClick:x,className:"friendShip-container my-3 flex cursor-pointer gap-x-2 rounded-md p-2 transition-all duration-150 ease-in hover:bg-zinc-500 hover:bg-opacity-25  ",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:null===(s=l.friend)||void 0===s?void 0:s.avatarUrl,alt:"userIcon",width:40,className:"rounded-full shadow-md shadow-zinc-900"}),(0,r.jsx)("div",{className:"absolute left-11 top-10",children:l&&(0,r.jsx)(o.Z,{status:l.activityStatus})})]}),(0,r.jsx)("small",{className:" font-bold text-rose-600",children:null===(t=l.friend)||void 0===t?void 0:t.username})]})};s.Z=(0,l.Pi)(m)},70424:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return R}});var r=t(85893),i=t(50828),l=t(67294),a=t(9211),n=t(9008),c=t.n(n),d=t(12997),x=t(85699),o=t(50229),u=t(79790),m=t(20128);let h=e=>{let{user:s}=e;return(0,r.jsxs)("div",{className:"user-container flex gap-x-2  items-center ",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(m.Z,{avatarUrl:s.avatarUrl,width:"w-10",height:"h-10"}),(0,r.jsx)("div",{className:"absolute left-8 top-9"})]}),(0,r.jsx)("small",{className:" font-bold text-rose-600",children:s.username})]})};var v=(0,i.Pi)(h),f=t(3688);let j=()=>{var e,s;let t=(null===(e=o.a.friends)||void 0===e?void 0:e.filter(e=>{var s,t;return"pending"===e.status&&(null===(s=e.requester)||void 0===s?void 0:s.id)==(null===(t=o.a.user)||void 0===t?void 0:t.id)}))||[],i=(null===(s=o.a.friends)||void 0===s?void 0:s.filter(e=>{var s,t;return"pending"===e.status&&(null===(s=e.requester)||void 0===s?void 0:s.id)!=(null===(t=o.a.user)||void 0===t?void 0:t.id)}))||[];async function l(e){try{await x._Q.accept(e)}catch(e){u.Z.error(e)}}async function a(e){try{await x._Q.delete(e)}catch(e){u.Z.error(e)}}return(0,r.jsxs)("div",{className:"rounded-md p-5",children:[(0,r.jsx)("div",{className:"text-lg font-bold text-zinc-200",children:"Decline or Accept Friends Requests"}),(0,r.jsxs)("div",{className:"relative flex flex-col py-4 ",children:[(0,r.jsxs)("ul",{className:"mb-5 w-full",children:[(0,r.jsx)("div",{className:"my-2 text-xl font-bold text-white",children:"Received:"}),i.length?i.map(e=>(0,r.jsxs)("li",{className:"flex w-full justify-between gap-x-2 rounded-md bg-zinc-800 p-2 m-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-3 text-xl font-bold text-zinc-300",children:[(0,r.jsx)(v,{user:e.friend}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:["Status: ",e.status]})]}),(0,r.jsx)("div",{className:"flex items-center text-sm text-gray-300",children:(0,r.jsx)(f.Z,{datetime:e.created,locale:"en-US",style:{margin:5}})}),(0,r.jsxs)("div",{className:"flex gap-x-2",children:[(0,r.jsx)("button",{className:"btn-primary",onClick:()=>l(e.id),children:"Accept"}),(0,r.jsx)("button",{className:"rounded-md bg-purple-500 p-2 font-bold text-zinc-300 hover:bg-opacity-80",onClick:()=>a(e.id),children:"Decline"})]})]},e.id)):(0,r.jsx)("div",{className:"text-xl font-bold text-zinc-200",children:"No Friend Requests received"})]}),(0,r.jsxs)("ul",{className:"w-full",children:[(0,r.jsx)("div",{className:"my-2 text-xl font-bold text-white",children:"Sent:"}),t.length?t.map(e=>(0,r.jsxs)("li",{className:"flex w-full justify-between gap-x-2 rounded-md bg-zinc-800 p-2 m-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-3 text-xl font-bold text-zinc-300",children:[(0,r.jsx)(v,{user:e.friend}),(0,r.jsxs)("div",{className:"text-sm",children:["Status: ",e.status]})]}),(0,r.jsx)("div",{className:"flex items-center text-sm text-gray-300",children:(0,r.jsx)(f.Z,{datetime:e.created,locale:"en-US",style:{margin:5}})}),(0,r.jsx)("div",{className:"flex gap-x-2",children:(0,r.jsx)("button",{className:"rounded-md bg-purple-500 p-2 font-bold text-zinc-300 hover:bg-opacity-80",onClick:()=>a(e.id),children:"Cancel"})})]},e.id)):(0,r.jsx)("div",{className:"text-xl font-bold text-zinc-200",children:"No Friend Requests sent"})]})]})]})};var N=(0,i.Pi)(j),p=t(87536),b=t(96486),g=t(50930),y=t(61528),w=t(89583),S=t(41664),k=t.n(S);let z=()=>{let[e,s]=(0,l.useState)(!1),[t,i]=(0,l.useState)(!1),[a,n]=(0,l.useState)(""),{register:c,handleSubmit:d,setValue:o,reset:m}=(0,p.cI)({defaultValues:{receiver:"",receiverData:""}}),h=async e=>{let s=e.currentTarget.value;await f(s)},v=async t=>{try{if(e){let e=await x._Q.create(t.receiver);e&&(m(),s(!1),n(""),u.Z.success("Sent Friend Request!"))}}catch(e){u.Z.error(e)}},f=(0,l.useCallback)((0,b.debounce)(async e=>{try{i(!0);let t=await x.Xv.checkIfUserCanAddFriend(e);if(t.error)return j(t.error);o("receiver",t.userId),s(!0),i(!1)}catch(e){u.Z.error(e)}},1e3),[]),j=e=>{console.warn(e),n(e),i(!1),s(!1)};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"rounded-md  p-5",children:[(0,r.jsx)("div",{className:" text-lg font-bold text-zinc-200",children:"Add Friend"}),(0,r.jsxs)("div",{className:" text-zinc-400",children:["You can add a friend with their username and friendId. It's cAsE sEnSiTiVe",(0,r.jsx)("br",{}),"beepo#7pav16sqx77dapf"]}),(0,r.jsxs)("div",{className:"relative flex flex-col py-4",children:[(0,r.jsx)(y.ZP,{placement:"bottom",color:"invert",content:(0,r.jsx)("strong",{children:" Example: TungusTheFungus#d1xf11e03i3mio2"}),children:(0,r.jsx)(w.MXt,{size:25,className:"text-gray-300"})}),(0,r.jsxs)("form",{onSubmit:d(v),className:"relative flex w-full  py-4",children:[(0,r.jsx)("input",{type:"text",...c("receiverData",{required:!0}),className:"add-friend-input ".concat(e?"border-green-400":""),placeholder:"Enter a Username#FriendId ",onChange:e=>h(e)}),(0,r.jsx)("button",{className:"".concat(e?"send-friend-request-button ":"send-friend-request-button-disabled"),disabled:!e,type:"submit",children:"Send Friend Request"})]}),(0,r.jsx)("div",{className:" z-30",children:(0,r.jsx)(g.Z,{show:t})}),""!==a&&(0,r.jsx)("div",{className:"text-red-400",children:a}),e&&(0,r.jsxs)("div",{className:"  flex items-center gap-x-2  p-2",children:[(0,r.jsx)("div",{className:"text-green-400",children:"âœ“"}),(0,r.jsx)("div",{className:"text-green-400",children:"Valid"})]})]}),(0,r.jsx)("hr",{className:"border-gray-500"}),(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("div",{className:"my-3 text-lg font-bold text-gray-200",children:"MAKE FRIENDS BY JOINING SERVERS AND CONNECTING"}),(0,r.jsx)(k(),{href:"/",children:(0,r.jsxs)("div",{className:"flex w-1/2  items-center justify-between rounded border border-gray-500 bg-zinc-800/40 py-2 px-4 hover:bg-zinc-500",children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-2 text-gray-300",children:[(0,r.jsx)("div",{className:"rounded-lg bg-gray-800 p-2",children:(0,r.jsx)(w.Phk,{size:30})}),"Explore Public Servers"]}),(0,r.jsx)(w.Dli,{size:30,className:"text-gray-300"})]})})]})]})})};var _=(0,i.Pi)(z),E=t(73560);function F(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter(Boolean).join(" ")}var R=(0,i.Pi)((0,E.Q)(function(){let[e]=(0,l.useState)(["Requests","AddFriend"]),[s,t]=(0,l.useState)("Requests");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c(),{children:[(0,r.jsx)("title",{children:"next-pocket"}),(0,r.jsx)("meta",{name:"description",content:"Generated by create-t3-app"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center ",children:(0,r.jsxs)("div",{className:"flex  h-screen  w-full ",children:[(0,r.jsx)(d.Z,{}),(0,r.jsx)("div",{className:" relative h-full flex-1 items-stretch    overflow-hidden bg-gray-300   dark:bg-zinc-700  ",children:(0,r.jsx)("div",{className:"",children:(0,r.jsx)("div",{className:"px-2  sm:px-0",children:(0,r.jsxs)(a.O.Group,{children:[(0,r.jsx)(a.O.List,{className:"flex space-x-1 ",children:e.map(e=>(0,r.jsx)(a.O,{className:e=>{let{selected:s}=e;return F(s?"active-tab-list":"tab-list")},onClick:()=>t(e),children:e},e))}),(0,r.jsxs)(a.O.Panels,{className:"mt-2",children:[(0,r.jsx)(a.O.Panel,{className:F("rounded-xl  p-3"," "),children:"Requests"===s&&(0,r.jsx)(N,{})}),(0,r.jsx)(a.O.Panel,{className:F(" rounded-xl p-3",""),children:"AddFriend"===s&&(0,r.jsx)(_,{})})]})]})})})})]})})]})}))},72770:function(e){"use strict";e.exports=next}},function(e){e.O(0,[662,615,186,774,888,179],function(){return e(e.s=49229)}),_N_E=e.O()}]);